<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/opengraphimage.png" />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/opengraphimage.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="RapidWorks - Ideas into Action"
    />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>RapidWorks</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="RapidWorks - IDEAS INTO ACTION" />
    <meta property="og:description" content="Transform your ideas into action with RapidWorks." />
    <meta property="og:image" content="%PUBLIC_URL%/opengraphimage.png" />
    <meta property="og:image:alt" content="RapidWorks Brand Visual" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="RapidWorks - IDEAS INTO ACTION" />
    <meta name="twitter:description" content="Transform your ideas into action with RapidWorks." />
    <meta name="twitter:image" content="%PUBLIC_URL%/opengraphimage.png" />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root">
      <!-- Fallback content for mobile debugging -->
      <div id="loading-fallback" style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        z-index: 9999;
      ">
                  <div style="text-align: center; padding: 20px;">
            <h1 style="color: #333; margin-bottom: 10px;">RapidWorks</h1>
            <p style="color: #666; margin-bottom: 20px;">Loading...</p>
            <div style="
              width: 40px;
              height: 40px;
              border: 3px solid #f3f3f3;
              border-top: 3px solid #333;
              border-radius: 50%;
              animation: spin 1s linear infinite;
              margin: 0 auto;
            "></div>
            <div id="mobile-debug-info" style="
              margin-top: 20px;
              font-size: 12px;
              color: #999;
              display: none;
            ">
              Debugging... Check console for details
            </div>
          </div>
      </div>
      <style>
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      </style>
    </div>
    
          <script>
        // Function to remove loading screen
        function removeLoadingScreen() {
          const fallback = document.getElementById('loading-fallback');
          if (fallback) {
            console.log('🚀 Removing loading screen');
            fallback.style.opacity = '0';
            setTimeout(() => {
              if (fallback.parentNode) {
                fallback.remove();
              }
            }, 300);
          }
        }
        
        // Method 1: Watch for React root content changes
        const observer = new MutationObserver((mutations) => {
          const root = document.getElementById('root');
          // Check if there are React elements in the root (more than just loading screen)
          if (root && root.children.length > 1) {
            console.log('✅ React app detected - removing loading screen');
            removeLoadingScreen();
            observer.disconnect();
          }
        });
        
        // Start watching for changes
        const rootElement = document.getElementById('root');
        if (rootElement) {
          observer.observe(rootElement, { 
            childList: true, 
            subtree: true 
          });
        }
        
        // Method 2: Timeout fallback (remove after 8 seconds regardless)
        setTimeout(() => {
          console.log('⏰ Timeout reached - removing loading screen');
          removeLoadingScreen();
          if (observer) observer.disconnect();
        }, 8000);
        
        // Method 3: Remove when React elements are detected
        const checkReactInterval = setInterval(() => {
          const root = document.getElementById('root');
          // Look for React elements (div elements that aren't the loading screen)
          const reactElements = root ? root.querySelectorAll('div:not(#loading-fallback)') : [];
          if (reactElements.length > 0) {
            console.log('⚛️ React elements detected - removing loading screen');
            removeLoadingScreen();
            if (observer) observer.disconnect();
            clearInterval(checkReactInterval);
          }
        }, 1000);
        
        // Mobile debugging - log errors to console
        window.addEventListener('error', (e) => {
          console.error('Global error:', e.error || e.message, e.filename, e.lineno);
          // If there's a critical error, remove loading screen after delay
          setTimeout(() => {
            removeLoadingScreen();
          }, 2000);
        });
        
        window.addEventListener('unhandledrejection', (e) => {
          console.error('Unhandled promise rejection:', e.reason);
          // If there's a critical error, remove loading screen after delay
          setTimeout(() => {
            removeLoadingScreen();
          }, 2000);
        });
        
        console.log('📱 Mobile debug script loaded - watching for React app');
        
        // Mobile-specific aggressive debugging
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        if (isMobile) {
          console.log('📱 Mobile device detected - enabling enhanced debugging');
          
          // Show debug info for mobile
          const debugInfo = document.getElementById('mobile-debug-info');
          if (debugInfo) {
            debugInfo.style.display = 'block';
          }
          
          // Force remove loading screen after 3 seconds on mobile
          setTimeout(() => {
            console.log('📱 Mobile: Force removing loading screen after 3 seconds');
            removeLoadingScreen();
          }, 3000);
          
          // Show React loading status every second
          let checkCount = 0;
          const statusInterval = setInterval(() => {
            checkCount++;
            const root = document.getElementById('root');
            const reactElements = root ? root.querySelectorAll('div:not(#loading-fallback)') : [];
            console.log(`📱 Mobile Check ${checkCount}: Root children: ${root?.children?.length || 0}, React elements: ${reactElements.length}`);
            
            if (reactElements.length > 0 || checkCount > 15) {
              clearInterval(statusInterval);
              if (reactElements.length > 0) {
                console.log('📱 Mobile: React detected via status check');
                removeLoadingScreen();
              } else {
                console.log('📱 Mobile: Timeout reached, forcing removal');
                removeLoadingScreen();
              }
            }
          }, 1000);
        }
      </script>
  </body>
</html>